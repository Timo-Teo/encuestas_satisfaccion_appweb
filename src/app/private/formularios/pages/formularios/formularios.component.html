<div class="card flex justify-content-center">
  <p-fieldset>

    <p-button
      label="Nuevo"
      icon="pi pi-plus"
      severity="success"
      (click)="onNuevo()"
    ></p-button>

    <p-table
      #table
      [value]="formulariosEstructura"
      [(selection)]="formulariosSeleccionados"
      [paginator]="true"
      [rowsPerPageOptions]="[5, 10, 20]"
      [rows]="5"
      [tableStyle]="{'min-width': '50rem'}"
      [globalFilterFields]="['id', 'nombre', 'periodo.nombre', 'dependencia.nombre', 'vigente']"
      stateStorage="session"
      dataKey="id"
    >
      <ng-template pTemplate="caption">
        <p-iconField iconPosition="left">
          <p-inputIcon>
            <i class="pi pi-search"></i>
          </p-inputIcon>
          <input
            pInputText
            type="text"
            [(ngModel)]="valorBusqueda"
            (input)="table.filterGlobal(valorBusqueda, 'contains')"
            placeholder="Buscar"/>
        </p-iconField>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 4rem">
            <p-tableHeaderCheckbox/>
          </th>
          <th pSortableColumn="id" style="width: 4rem">
            ID
            <p-sortIcon field="id"/>
          </th>
          <th pSortableColumn="nombre" style="width: 25%">
            Nombre
            <p-sortIcon field="nombre"/>
          </th>
          <th pSortableColumn="periodo.nombre" style="width: 20%">
            Periodo
            <p-sortIcon field="periodo.nombre"/>
          </th>
          <th pSortableColumn="dependencia.nombre" style="width: 20%">
            Dependencia
            <p-sortIcon field="dependencia.nombre"/>
          </th>
          <th pSortableColumn="vigente" style="width: 20%">
            Estado
            <p-sortIcon field="vigente"/>
          </th>
          <th style="width: 5rem"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-formulario>
        <tr>
          <td>
            <p-tableCheckbox [value]="formulario"/>
          </td>
          <td>{{ formulario.id }}</td>
          <td>{{ formulario.nombre }}</td>
          <td>{{ formulario.periodo.nombre }}</td>
          <td>{{ formulario.dependencia.nombre }}</td>
          <td>
            <p-tag [value]="formulario.vigente ? 'ACTIVO' : 'INACTIVO'"
                   [severity]="getSeverity(formulario.vigente)"/>
          </td>
          <td>
            <button
              type="button"
              pButton
              pRipple
              icon="pi pi-pencil"
              size="small"
              [rounded]="true"
              severity="success"
              (click)="onEditar(formulario.id)"
            >
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>


  </p-fieldset>
</div>
